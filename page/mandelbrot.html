<html>	<head>		<title>JS1K Demo</title>		<meta charset="utf-8">		<!-- <style>			div {				width: 960px;				margin: 0 auto;			}		</style> -->	</head>		<body>				<canvas id="c" width="1366px" height="768px">x				<script>			var b = document.body;			var c = document.getElementsByTagName('canvas')[0];			var a = c.getContext('2d');			document.body.clientWidth; // fix bug in webkit: http://qfox.nl/weblog/218		</script>				<script>			var f, g, h, j, m = 555,			o = document.body.children[0],			w = Math;			R = w.round;			H = (o.width = o.height = W = R(this.innerHeight * .96)) / 2;			c = o.getContext("2d");			L = 2;			S = 0;			T = -2.0669;			V = 2.3389;			U = 4.7;			function z() {				for (t = 2 << L; t-- > 0;) {					if (S-- < 1) {						g = f = 0;						S = 1 << 2 * ++L;						h = 1 << L;						j = W / h					}					if (j < .7) return;					l = "#000";					for (u = T + U * (f + 1) / h, v = V - U * (g + 1) / h, n = m, a = b = x = y = d = 0; a = x * x, b = y * y, n > 0; n--) {						if (d > 0 | a + b > 4 && d++ > 4) {							n = m - n - w.log(w.log(a + b)) / w.LN2;							D = w.sqrt(n);							l = "rgb(" + R(n / m * 255) + "," + R((w.sin(D) + 1) * 127) + "," + R((w.cos(D * n) + 1) * 127) + ")";							break						}						y = 2 * x * y + v;						x = a - b + u					}					c.fillStyle = l;					c.fillRect(f * j, g * j, j, j);					i = L - 1;					s = r = 0;					p = -((1 << L) - 1);					for (q = 0; i >= 0;) {						r = 4 * s | 2 * (f >> i & 1) | g >> i-- & 1;						if (48603 >> r & 1) {							p = (373626457 >> 2 * r & 3) - 1;							q = (1360422166 >> 2 * r & 3) - 1						}						s = 2414237745 >> 2 * r & 3					}					f += p;					g += q				}				setTimeout(z)			}			function A(e, B, C) {				if (e) {					L = 3;					g = f = S = 0;					u = e > 0 ? U / 3 : U * .7;					T += B / W * U - u;					V -= C / W * U - u;					U = u * 2				}				z()			}			o.onclick = function(e) {				A(1, e.clientX, e.clientY)			};			o.onmousewheel = function(e) {				A(e.wheelDelta, H, H)			};			onkeydown = function(e) {				k = event ? e.keyCode : e.which;				A((k == 38) - (k == 40), H, H)			};			addEventListener("DOMMouseScroll", function(e) {				A(-e.detail, H, H)			}, 0);			z()		</script>			</body></html>	